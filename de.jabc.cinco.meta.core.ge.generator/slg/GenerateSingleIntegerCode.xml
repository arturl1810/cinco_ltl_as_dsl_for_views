<?xml version="1.0" encoding="ISO-8859-1"?>
<model version="2.1">
  <id>9bf333cd-76eb-4707-be7a-f62b921e88c5</id>
  <name>GenerateSingleIntegerCode</name>
  <changecounter>55</changecounter>
  <sib>
    <id>761a275f-3772-4618-b07b-2202449515c5</id>
    <name>RunStringTemplate</name>
    <label>GenRefreshCode</label>
    <sib-uid>script-sibs/RunStringTemplate</sib-uid>
    <taxonomy>de.jabc.sib.common.script.RunStringTemplate</taxonomy>
    <position>542.5,108.0</position>
    <parameter name="append">
      <boolean>false</boolean>
    </parameter>
    <parameter name="individualVariables">
      <boolean>false</boolean>
    </parameter>
    <parameter name="result">
      <de.metaframe.jabc.framework.sib.parameter.ContextKey>
        <ContextKeyFoundation>
          <key>refreshCode</key>
          <scope>PARENT</scope>
          <scopeMutable>true</scopeMutable>
        </ContextKeyFoundation>
      </de.metaframe.jabc.framework.sib.parameter.ContextKey>
    </parameter>
    <parameter name="template">
      <string>$context.flAttributeName$Text.setText(String.valueOf(tmp.get$context.fuAttributeName$()));</string>
    </parameter>
    <finalbranches>default</finalbranches>
    <finalbranches>error</finalbranches>
  </sib>
  <sib>
    <id>1a154b82-bc13-4dd1-9b2d-8b226c05adcc</id>
    <name>RunStringTemplate_1</name>
    <label>GenChangeValue</label>
    <sib-uid>script-sibs/RunStringTemplate</sib-uid>
    <taxonomy>de.jabc.sib.common.script.RunStringTemplate</taxonomy>
    <position>376.0,108.0</position>
    <parameter name="append">
      <boolean>false</boolean>
    </parameter>
    <parameter name="individualVariables">
      <boolean>false</boolean>
    </parameter>
    <parameter name="result">
      <de.metaframe.jabc.framework.sib.parameter.ContextKey>
        <ContextKeyFoundation>
          <key>changeValueCode</key>
          <scope>PARENT</scope>
          <scopeMutable>true</scopeMutable>
        </ContextKeyFoundation>
      </de.metaframe.jabc.framework.sib.parameter.ContextKey>
    </parameter>
    <parameter name="template">
      <string>PictogramElement pe = getSelectedPictogramElement();
if (pe == null)
	return;

EObject tmp = Graphiti.getLinkService().getBusinessObjectForLinkedPictogramElement(pe);
if (tmp instanceof $context.modelElementName$) {
	try {
		(($context.modelElementName$) tmp).set$context.fuAttributeName$(Integer.valueOf($context.flAttributeName$Text.getText()));
	} catch (NumberFormatException e) {
		(($context.modelElementName$) tmp).set$context.fuAttributeName$(Integer.valueOf(0));
	}
}
</string>
    </parameter>
    <finalbranches>default</finalbranches>
    <finalbranches>error</finalbranches>
  </sib>
  <sib>
    <id>6035ad83-5438-4424-82e3-37427811adfb</id>
    <name>RunStringTemplate_2</name>
    <label>GenControl</label>
    <sib-uid>script-sibs/RunStringTemplate</sib-uid>
    <taxonomy>de.jabc.sib.common.script.RunStringTemplate</taxonomy>
    <position>200.0,108.0</position>
    <parameter name="append">
      <boolean>false</boolean>
    </parameter>
    <parameter name="individualVariables">
      <boolean>false</boolean>
    </parameter>
    <parameter name="result">
      <de.metaframe.jabc.framework.sib.parameter.ContextKey>
        <ContextKeyFoundation>
          <key>controlCode</key>
          <scope>PARENT</scope>
          <scopeMutable>true</scopeMutable>
        </ContextKeyFoundation>
      </de.metaframe.jabc.framework.sib.parameter.ContextKey>
    </parameter>
    <parameter name="template">
      <string>private Text $context.flAttributeName$Text;
	
@Override
public void createControls(Composite parent, TabbedPropertySheetPage tabbedPropertySheetPage) {
	super.createControls(parent, tabbedPropertySheetPage);
	TabbedPropertySheetWidgetFactory factory = getWidgetFactory();
	Composite composite = factory.createFlatFormComposite(parent);
	GridLayout grid = new GridLayout(2, false);
	composite.setLayout(grid);

	GridData data;

	Label $context.attribute.name$Label = factory.createLabel(composite, &quot;$context.fuAttributeName$:&quot;);
	data = new GridData(SWT.LEFT, SWT.CENTER, false, false);
	$context.attribute.name$Label.setLayoutData(data);

	$context.flAttributeName$Text = factory.createText(composite, &quot;&quot;);
	data = new GridData(SWT.FILL, SWT.CENTER, true, false);
	$context.attributeName$Text.setLayoutData(data);

	$context.attributeName$Text.addTraverseListener(traverseListener);
	$context.attributeName$Text.addVerifyListener(verifyListener);
}
</string>
    </parameter>
    <finalbranches>default</finalbranches>
    <finalbranches>error</finalbranches>
  </sib>
  <edge>
    <source>6035ad83-5438-4424-82e3-37427811adfb</source>
    <target>1a154b82-bc13-4dd1-9b2d-8b226c05adcc</target>
    <point>240.0,135.0</point>
    <point>435.0,135.0</point>
    <labelposition>500.0,0.0</labelposition>
    <branch>default</branch>
  </edge>
  <edge>
    <source>1a154b82-bc13-4dd1-9b2d-8b226c05adcc</source>
    <target>761a275f-3772-4618-b07b-2202449515c5</target>
    <point>435.0,135.0</point>
    <point>600.0,135.0</point>
    <labelposition>500.0,0.0</labelposition>
    <branch>default</branch>
  </edge>
  <sib>
    <id>6903f643-86bd-4487-81e9-8b422f28c17d</id>
    <name>RunStringTemplate_3</name>
    <label>GenListenerCode</label>
    <sib-uid>script-sibs/RunStringTemplate</sib-uid>
    <taxonomy>de.jabc.sib.common.script.RunStringTemplate</taxonomy>
    <position>706.0,108.0</position>
    <parameter name="append">
      <boolean>false</boolean>
    </parameter>
    <parameter name="individualVariables">
      <boolean>false</boolean>
    </parameter>
    <parameter name="result">
      <de.metaframe.jabc.framework.sib.parameter.ContextKey>
        <ContextKeyFoundation>
          <key>listenerCode</key>
          <scope>PARENT</scope>
          <scopeMutable>true</scopeMutable>
        </ContextKeyFoundation>
      </de.metaframe.jabc.framework.sib.parameter.ContextKey>
    </parameter>
    <parameter name="template">
      <string>TraverseListener traverseListener = new TraverseListener() {
		
	@Override
	public void keyTraversed(TraverseEvent e) {
		if (e.detail == SWT.TRAVERSE_RETURN) {
			TransactionalEditingDomain dom = getDiagramContainer().getDiagramBehavior().getEditingDomain();
			dom.getCommandStack().execute(new RecordingCommand(dom, &quot;Set $context.flAttributeName$&quot;) {
				
				@Override
				protected void doExecute() {
					changeValue();
				}
			});
		}
	}
};

VerifyListener verifyListener= new VerifyListener() {

	@Override
	public void verifyText(VerifyEvent e) {
		try {
			if (e.keyCode == SWT.DEL || e.keyCode == SWT.BS) {
				e.doit = true;
				return;
			}
			Integer.valueOf(e.text);
			e.doit = true;
		} catch (NumberFormatException e1) {
			e.doit = false;
		}
	}
};</string>
    </parameter>
    <finalbranches>default</finalbranches>
    <finalbranches>error</finalbranches>
  </sib>
  <edge>
    <source>761a275f-3772-4618-b07b-2202449515c5</source>
    <target>6903f643-86bd-4487-81e9-8b422f28c17d</target>
    <point>600.0,135.0</point>
    <point>765.0,135.0</point>
    <labelposition>500.0,0.0</labelposition>
    <branch>default</branch>
  </edge>
  <sib>
    <id>00772c45-9789-421f-b846-da7ec38b39ca</id>
    <name>EvaluateBoolean</name>
    <label>EvaluateBoolean</label>
    <sib-uid>basic-sibs/EvaluateBoolean</sib-uid>
    <taxonomy>de.jabc.sib.common.basic.EvaluateBoolean</taxonomy>
    <position>46.5,213.0</position>
    <parameter name="bool">
      <de.metaframe.jabc.framework.sib.parameter.ContextKey>
        <ContextKeyFoundation>
          <key>isPrimeRef</key>
          <scope>GLOBAL</scope>
          <scopeMutable>true</scopeMutable>
        </ContextKeyFoundation>
      </de.metaframe.jabc.framework.sib.parameter.ContextKey>
    </parameter>
    <finalbranches>error</finalbranches>
    <finalbranches>false</finalbranches>
    <finalbranches>true</finalbranches>
    <userobject key="ABC$START">
      <boolean>true</boolean>
    </userobject>
  </sib>
  <sib>
    <id>b9b060a7-86bb-4e79-99cc-82c2faf9fce0</id>
    <name>RunStringTemplate_4</name>
    <label>GenRefreshCode</label>
    <sib-uid>script-sibs/RunStringTemplate</sib-uid>
    <taxonomy>de.jabc.sib.common.script.RunStringTemplate</taxonomy>
    <position>377.5,333.0</position>
    <parameter name="append">
      <boolean>false</boolean>
    </parameter>
    <parameter name="individualVariables">
      <boolean>false</boolean>
    </parameter>
    <parameter name="result">
      <de.metaframe.jabc.framework.sib.parameter.ContextKey>
        <ContextKeyFoundation>
          <key>refreshCode</key>
          <scope>PARENT</scope>
          <scopeMutable>true</scopeMutable>
        </ContextKeyFoundation>
      </de.metaframe.jabc.framework.sib.parameter.ContextKey>
    </parameter>
    <parameter name="template">
      <string>$context.fuModelElementName$ $context.flModelElementName$ = null;
PictogramElement pe = getSelectedPictogramElement();
if (pe != null) {
	bo = Graphiti.getLinkService().getBusinessObjectForLinkedPictogramElement(pe);
}
if (bo instanceof $context.fuModelElementName$)
	$context.flModelElementName$ = ($context.fuModelElementName$) bo;
else return;
String id = $context.flModelElementName$.get$context.fuEClassName$UID();
EObject referenced = ReferenceRegistry.getInstance().getEObject(Integer.valueOf(id));
EStructuralFeature feature = referenced.eClass().getEStructuralFeature(&quot;$context.flAttributeName$&quot;);
Object value = referenced.eGet(feature, true);
$context.flAttributeName$Text.setText(value + &quot;&quot;);</string>
    </parameter>
    <finalbranches>default</finalbranches>
    <finalbranches>error</finalbranches>
  </sib>
  <sib>
    <id>e26c99e2-fc15-40ff-a42f-3de1f6da67d8</id>
    <name>RunStringTemplate_6</name>
    <label>GenControl</label>
    <sib-uid>script-sibs/RunStringTemplate</sib-uid>
    <taxonomy>de.jabc.sib.common.script.RunStringTemplate</taxonomy>
    <position>200.0,333.0</position>
    <parameter name="append">
      <boolean>false</boolean>
    </parameter>
    <parameter name="individualVariables">
      <boolean>false</boolean>
    </parameter>
    <parameter name="result">
      <de.metaframe.jabc.framework.sib.parameter.ContextKey>
        <ContextKeyFoundation>
          <key>controlCode</key>
          <scope>PARENT</scope>
          <scopeMutable>true</scopeMutable>
        </ContextKeyFoundation>
      </de.metaframe.jabc.framework.sib.parameter.ContextKey>
    </parameter>
    <parameter name="template">
      <string>private Text $context.flAttributeName$Text;
	
@Override
public void createControls(Composite parent, TabbedPropertySheetPage tabbedPropertySheetPage) {
	super.createControls(parent, tabbedPropertySheetPage);
	TabbedPropertySheetWidgetFactory factory = getWidgetFactory();
	Composite composite = factory.createFlatFormComposite(parent);
	GridLayout grid = new GridLayout(2, false);
	composite.setLayout(grid);

	GridData data;

	Label $context.attribute.name$Label = factory.createLabel(composite, &quot;$context.fuAttributeName$:&quot;);
	data = new GridData(SWT.LEFT, SWT.CENTER, false, false);
	$context.attribute.name$Label.setLayoutData(data);

	$context.flAttributeName$Text = factory.createText(composite, &quot;&quot;);
	data = new GridData(SWT.FILL, SWT.CENTER, true, false);
	$context.attributeName$Text.setLayoutData(data);
	
	$context.attributeName$Text.setEditable(false);
	$context.attributeName$Text.setEnabled(false);

}
</string>
    </parameter>
    <finalbranches>default</finalbranches>
    <finalbranches>error</finalbranches>
  </sib>
  <edge>
    <source>e26c99e2-fc15-40ff-a42f-3de1f6da67d8</source>
    <target>b9b060a7-86bb-4e79-99cc-82c2faf9fce0</target>
    <point>195.0,330.0</point>
    <point>360.0,330.0</point>
    <labelposition>500.0,0.0</labelposition>
    <branch>default</branch>
  </edge>
  <edge>
    <source>00772c45-9789-421f-b846-da7ec38b39ca</source>
    <target>e26c99e2-fc15-40ff-a42f-3de1f6da67d8</target>
    <point>90.0,240.0</point>
    <point>195.0,330.0</point>
    <labelposition>500.0,0.0</labelposition>
    <branch>true</branch>
  </edge>
  <edge>
    <source>00772c45-9789-421f-b846-da7ec38b39ca</source>
    <target>6035ad83-5438-4424-82e3-37427811adfb</target>
    <point>90.0,240.0</point>
    <point>224.0,129.0</point>
    <branch>false</branch>
  </edge>
  <values/>
  <branch>
    <name>error</name>
    <branch>error</branch>
    <sib>6035ad83-5438-4424-82e3-37427811adfb</sib>
  </branch>
  <branch>
    <name>error</name>
    <branch>error</branch>
    <sib>1a154b82-bc13-4dd1-9b2d-8b226c05adcc</sib>
  </branch>
  <branch>
    <name>error</name>
    <branch>error</branch>
    <sib>761a275f-3772-4618-b07b-2202449515c5</sib>
  </branch>
  <branch>
    <name>error</name>
    <branch>error</branch>
    <sib>6903f643-86bd-4487-81e9-8b422f28c17d</sib>
  </branch>
  <branch>
    <name>default</name>
    <branch>default</branch>
    <sib>6903f643-86bd-4487-81e9-8b422f28c17d</sib>
  </branch>
  <branch>
    <name>error</name>
    <branch>error</branch>
    <sib>00772c45-9789-421f-b846-da7ec38b39ca</sib>
  </branch>
  <branch>
    <name>error</name>
    <branch>error</branch>
    <sib>e26c99e2-fc15-40ff-a42f-3de1f6da67d8</sib>
  </branch>
  <branch>
    <name>error</name>
    <branch>error</branch>
    <sib>b9b060a7-86bb-4e79-99cc-82c2faf9fce0</sib>
  </branch>
  <branch>
    <name>default</name>
    <branch>default</branch>
    <sib>b9b060a7-86bb-4e79-99cc-82c2faf9fce0</sib>
  </branch>
</model>