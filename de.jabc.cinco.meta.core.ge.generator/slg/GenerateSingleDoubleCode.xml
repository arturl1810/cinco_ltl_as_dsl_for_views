<?xml version="1.0" encoding="ISO-8859-1"?>
<model version="2.1">
  <id>58218bce-14ea-427d-8c72-e67903670e10</id>
  <name>GenerateSingleDoubleCode</name>
  <changecounter>20</changecounter>
  <sib>
    <id>07490c72-84c8-4157-9ddc-dafda795be38</id>
    <name>RunStringTemplate</name>
    <label>GenRefreshCode</label>
    <sib-uid>script-sibs/RunStringTemplate</sib-uid>
    <taxonomy>de.jabc.sib.common.script.RunStringTemplate</taxonomy>
    <position>632.5,138.0</position>
    <parameter name="append">
      <boolean>false</boolean>
    </parameter>
    <parameter name="individualVariables">
      <boolean>false</boolean>
    </parameter>
    <parameter name="result">
      <de.metaframe.jabc.framework.sib.parameter.ContextKey>
        <ContextKeyFoundation>
          <key>refreshCode</key>
          <scope>PARENT</scope>
          <scopeMutable>true</scopeMutable>
        </ContextKeyFoundation>
      </de.metaframe.jabc.framework.sib.parameter.ContextKey>
    </parameter>
    <parameter name="template">
      <string>$context.flAttributeName$Text.setText(String.valueOf(tmp.get$context.fuAttributeName$()));</string>
    </parameter>
    <finalbranches>default</finalbranches>
    <finalbranches>error</finalbranches>
  </sib>
  <sib>
    <id>04e295fe-943a-4974-80d0-c5dbe081048d</id>
    <name>RunStringTemplate_1</name>
    <label>GenChangeValue</label>
    <sib-uid>script-sibs/RunStringTemplate</sib-uid>
    <taxonomy>de.jabc.sib.common.script.RunStringTemplate</taxonomy>
    <position>481.0,138.0</position>
    <parameter name="append">
      <boolean>false</boolean>
    </parameter>
    <parameter name="individualVariables">
      <boolean>false</boolean>
    </parameter>
    <parameter name="result">
      <de.metaframe.jabc.framework.sib.parameter.ContextKey>
        <ContextKeyFoundation>
          <key>changeValueCode</key>
          <scope>PARENT</scope>
          <scopeMutable>true</scopeMutable>
        </ContextKeyFoundation>
      </de.metaframe.jabc.framework.sib.parameter.ContextKey>
    </parameter>
    <parameter name="template">
      <string>PictogramElement pe = getSelectedPictogramElement();
if (pe == null)
	return;

EObject tmp = Graphiti.getLinkService().getBusinessObjectForLinkedPictogramElement(pe);
if (tmp instanceof $context.modelElementName$) {
	try {
		(($context.modelElementName$) tmp).set$context.fuAttributeName$(Double.valueOf($context.flAttributeName$Text.getText()));
	} catch (NumberFormatException e) {
		(($context.modelElementName$) tmp).set$context.fuAttributeName$(0.0);
	}
}
</string>
    </parameter>
    <finalbranches>default</finalbranches>
    <finalbranches>error</finalbranches>
  </sib>
  <sib>
    <id>7f1585b8-9960-4d85-95a1-0f4af29f5ff3</id>
    <name>RunStringTemplate_2</name>
    <label>GenControl</label>
    <sib-uid>script-sibs/RunStringTemplate</sib-uid>
    <taxonomy>de.jabc.sib.common.script.RunStringTemplate</taxonomy>
    <position>290.0,138.0</position>
    <parameter name="append">
      <boolean>false</boolean>
    </parameter>
    <parameter name="individualVariables">
      <boolean>false</boolean>
    </parameter>
    <parameter name="result">
      <de.metaframe.jabc.framework.sib.parameter.ContextKey>
        <ContextKeyFoundation>
          <key>controlCode</key>
          <scope>PARENT</scope>
          <scopeMutable>true</scopeMutable>
        </ContextKeyFoundation>
      </de.metaframe.jabc.framework.sib.parameter.ContextKey>
    </parameter>
    <parameter name="template">
      <string>private Text $context.flAttributeName$Text;
	
@Override
public void createControls(Composite parent, TabbedPropertySheetPage tabbedPropertySheetPage) {
	super.createControls(parent, tabbedPropertySheetPage);
	TabbedPropertySheetWidgetFactory factory = getWidgetFactory();
	Composite composite = factory.createFlatFormComposite(parent);
	GridLayout grid = new GridLayout(2, false);
	composite.setLayout(grid);

	GridData data;

	Label $context.attribute.name$Label = factory.createLabel(composite, &quot;$context.fuAttributeName$:&quot;);
	data = new GridData(SWT.LEFT, SWT.CENTER, false, false);
	$context.attribute.name$Label.setLayoutData(data);

	$context.flAttributeName$Text = factory.createText(composite, &quot;&quot;);
	data = new GridData(SWT.FILL, SWT.CENTER, true, false);
	$context.attributeName$Text.setLayoutData(data);

	$context.attributeName$Text.addTraverseListener(traverseListener);
	$context.attributeName$Text.addVerifyListener(verifyListener);
}
</string>
    </parameter>
    <finalbranches>default</finalbranches>
    <finalbranches>error</finalbranches>
  </sib>
  <edge>
    <source>7f1585b8-9960-4d85-95a1-0f4af29f5ff3</source>
    <target>04e295fe-943a-4974-80d0-c5dbe081048d</target>
    <point>345.0,150.0</point>
    <point>540.0,150.0</point>
    <labelposition>500.0,0.0</labelposition>
    <branch>default</branch>
  </edge>
  <edge>
    <source>04e295fe-943a-4974-80d0-c5dbe081048d</source>
    <target>07490c72-84c8-4157-9ddc-dafda795be38</target>
    <point>540.0,150.0</point>
    <point>705.0,150.0</point>
    <labelposition>500.0,0.0</labelposition>
    <branch>default</branch>
  </edge>
  <sib>
    <id>c05042d1-48b7-4546-b768-c37cc024b65f</id>
    <name>RunStringTemplate_3</name>
    <label>GenListenerCode</label>
    <sib-uid>script-sibs/RunStringTemplate</sib-uid>
    <taxonomy>de.jabc.sib.common.script.RunStringTemplate</taxonomy>
    <position>811.0,138.0</position>
    <parameter name="append">
      <boolean>false</boolean>
    </parameter>
    <parameter name="individualVariables">
      <boolean>false</boolean>
    </parameter>
    <parameter name="result">
      <de.metaframe.jabc.framework.sib.parameter.ContextKey>
        <ContextKeyFoundation>
          <key>listenerCode</key>
          <scope>PARENT</scope>
          <scopeMutable>true</scopeMutable>
        </ContextKeyFoundation>
      </de.metaframe.jabc.framework.sib.parameter.ContextKey>
    </parameter>
    <parameter name="template">
      <string>TraverseListener traverseListener = new TraverseListener() {
		
	@Override
	public void keyTraversed(TraverseEvent e) {
		if (e.detail == SWT.TRAVERSE_RETURN) {
			TransactionalEditingDomain dom = getDiagramContainer().getDiagramBehavior().getEditingDomain();
			dom.getCommandStack().execute(new RecordingCommand(dom, &quot;Set $context.flAttributeName$&quot;) {
				
				@Override
				protected void doExecute() {
					changeValue();
				}
			});
		}
	}
};

VerifyListener verifyListener= new VerifyListener() {

	@Override
	public void verifyText(VerifyEvent e) {
		try {
			if (e.keyCode == SWT.DEL || e.keyCode == SWT.BS) {
				e.doit = true;
				return;
			}
			if (!(e.widget instanceof Text))
				return;
			Double.valueOf(((Text)e.widget).getText().concat(e.text));
			e.doit = true;
		} catch (NumberFormatException e1) {
			e.doit = false;
		}
	}
};</string>
    </parameter>
    <finalbranches>default</finalbranches>
    <finalbranches>error</finalbranches>
  </sib>
  <edge>
    <source>07490c72-84c8-4157-9ddc-dafda795be38</source>
    <target>c05042d1-48b7-4546-b768-c37cc024b65f</target>
    <point>705.0,150.0</point>
    <point>870.0,150.0</point>
    <labelposition>500.0,0.0</labelposition>
    <branch>default</branch>
  </edge>
  <sib>
    <id>132b4ad6-e767-4ce9-a3eb-97b84b40c6f6</id>
    <name>EvaluateBoolean</name>
    <label>EvaluateBoolean</label>
    <sib-uid>basic-sibs/EvaluateBoolean</sib-uid>
    <taxonomy>de.jabc.sib.common.basic.EvaluateBoolean</taxonomy>
    <position>151.5,243.0</position>
    <parameter name="bool">
      <de.metaframe.jabc.framework.sib.parameter.ContextKey>
        <ContextKeyFoundation>
          <key>isPrimeRef</key>
          <scope>GLOBAL</scope>
          <scopeMutable>true</scopeMutable>
        </ContextKeyFoundation>
      </de.metaframe.jabc.framework.sib.parameter.ContextKey>
    </parameter>
    <finalbranches>error</finalbranches>
    <finalbranches>false</finalbranches>
    <finalbranches>true</finalbranches>
    <userobject key="ABC$START">
      <boolean>true</boolean>
    </userobject>
  </sib>
  <sib>
    <id>6c60203e-599d-4714-8604-4fa507925954</id>
    <name>RunStringTemplate_4</name>
    <label>GenRefreshCode</label>
    <sib-uid>script-sibs/RunStringTemplate</sib-uid>
    <taxonomy>de.jabc.sib.common.script.RunStringTemplate</taxonomy>
    <position>467.5,363.0</position>
    <parameter name="append">
      <boolean>false</boolean>
    </parameter>
    <parameter name="individualVariables">
      <boolean>false</boolean>
    </parameter>
    <parameter name="result">
      <de.metaframe.jabc.framework.sib.parameter.ContextKey>
        <ContextKeyFoundation>
          <key>refreshCode</key>
          <scope>PARENT</scope>
          <scopeMutable>true</scopeMutable>
        </ContextKeyFoundation>
      </de.metaframe.jabc.framework.sib.parameter.ContextKey>
    </parameter>
    <parameter name="template">
      <string>$context.fuModelElementName$ $context.flModelElementName$ = null;
PictogramElement pe = getSelectedPictogramElement();
if (pe != null) {
	bo = Graphiti.getLinkService().getBusinessObjectForLinkedPictogramElement(pe);
}
if (bo instanceof $context.fuModelElementName$)
	$context.flModelElementName$ = ($context.fuModelElementName$) bo;
else return;
String id = $context.flModelElementName$.get$context.fuEClassName$UID();
EObject referenced = ReferenceRegistry.getInstance().getEObject(Integer.valueOf(id));
EStructuralFeature feature = referenced.eClass().getEStructuralFeature(&quot;$context.flAttributeName$&quot;);
Object value = referenced.eGet(feature, true);
$context.flAttributeName$Text.setText(value + &quot;&quot;);</string>
    </parameter>
    <finalbranches>default</finalbranches>
    <finalbranches>error</finalbranches>
  </sib>
  <sib>
    <id>b4f6df94-e7cb-4a21-bb77-82d8536fd5a9</id>
    <name>RunStringTemplate_6</name>
    <label>GenControl</label>
    <sib-uid>script-sibs/RunStringTemplate</sib-uid>
    <taxonomy>de.jabc.sib.common.script.RunStringTemplate</taxonomy>
    <position>290.0,363.0</position>
    <parameter name="append">
      <boolean>false</boolean>
    </parameter>
    <parameter name="individualVariables">
      <boolean>false</boolean>
    </parameter>
    <parameter name="result">
      <de.metaframe.jabc.framework.sib.parameter.ContextKey>
        <ContextKeyFoundation>
          <key>controlCode</key>
          <scope>PARENT</scope>
          <scopeMutable>true</scopeMutable>
        </ContextKeyFoundation>
      </de.metaframe.jabc.framework.sib.parameter.ContextKey>
    </parameter>
    <parameter name="template">
      <string>private Text $context.flAttributeName$Text;
	
@Override
public void createControls(Composite parent, TabbedPropertySheetPage tabbedPropertySheetPage) {
	super.createControls(parent, tabbedPropertySheetPage);
	TabbedPropertySheetWidgetFactory factory = getWidgetFactory();
	Composite composite = factory.createFlatFormComposite(parent);
	GridLayout grid = new GridLayout(2, false);
	composite.setLayout(grid);

	GridData data;

	Label $context.attribute.name$Label = factory.createLabel(composite, &quot;$context.fuAttributeName$:&quot;);
	data = new GridData(SWT.LEFT, SWT.CENTER, false, false);
	$context.attribute.name$Label.setLayoutData(data);

	$context.flAttributeName$Text = factory.createText(composite, &quot;&quot;);
	data = new GridData(SWT.FILL, SWT.CENTER, true, false);
	$context.attributeName$Text.setLayoutData(data);
	
	$context.attributeName$Text.setEditable(false);
	$context.attributeName$Text.setEnabled(false);

}
</string>
    </parameter>
    <finalbranches>default</finalbranches>
    <finalbranches>error</finalbranches>
  </sib>
  <edge>
    <source>b4f6df94-e7cb-4a21-bb77-82d8536fd5a9</source>
    <target>6c60203e-599d-4714-8604-4fa507925954</target>
    <point>300.0,345.0</point>
    <point>465.0,345.0</point>
    <labelposition>500.0,0.0</labelposition>
    <branch>default</branch>
  </edge>
  <edge>
    <source>132b4ad6-e767-4ce9-a3eb-97b84b40c6f6</source>
    <target>b4f6df94-e7cb-4a21-bb77-82d8536fd5a9</target>
    <point>195.0,255.0</point>
    <point>300.0,345.0</point>
    <labelposition>500.0,0.0</labelposition>
    <branch>true</branch>
  </edge>
  <edge>
    <source>132b4ad6-e767-4ce9-a3eb-97b84b40c6f6</source>
    <target>7f1585b8-9960-4d85-95a1-0f4af29f5ff3</target>
    <point>195.0,255.0</point>
    <point>330.0,150.0</point>
    <branch>false</branch>
  </edge>
  <values/>
  <branch>
    <name>error</name>
    <branch>error</branch>
    <sib>132b4ad6-e767-4ce9-a3eb-97b84b40c6f6</sib>
  </branch>
  <branch>
    <name>error</name>
    <branch>error</branch>
    <sib>7f1585b8-9960-4d85-95a1-0f4af29f5ff3</sib>
  </branch>
  <branch>
    <name>error</name>
    <branch>error</branch>
    <sib>04e295fe-943a-4974-80d0-c5dbe081048d</sib>
  </branch>
  <branch>
    <name>error</name>
    <branch>error</branch>
    <sib>07490c72-84c8-4157-9ddc-dafda795be38</sib>
  </branch>
  <branch>
    <name>error</name>
    <branch>error</branch>
    <sib>c05042d1-48b7-4546-b768-c37cc024b65f</sib>
  </branch>
  <branch>
    <name>default</name>
    <branch>default</branch>
    <sib>c05042d1-48b7-4546-b768-c37cc024b65f</sib>
  </branch>
  <branch>
    <name>error</name>
    <branch>error</branch>
    <sib>b4f6df94-e7cb-4a21-bb77-82d8536fd5a9</sib>
  </branch>
  <branch>
    <name>error</name>
    <branch>error</branch>
    <sib>6c60203e-599d-4714-8604-4fa507925954</sib>
  </branch>
  <branch>
    <name>default</name>
    <branch>default</branch>
    <sib>6c60203e-599d-4714-8604-4fa507925954</sib>
  </branch>
</model>